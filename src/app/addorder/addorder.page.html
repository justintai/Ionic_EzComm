<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" mode="ios">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button *ngIf="mode == '2'" (click)="order_edit()"><ion-icon name="create"></ion-icon></ion-button>
      <ion-button *ngIf="mode == '1' || mode == '3'" (click)="order_save()"><ion-icon name="save"></ion-icon></ion-button>
    </ion-buttons>
    <ion-title>{{page_title}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-grid>
    <ion-row>
      <ion-col size="3">
        <div class="item-img">
          <ion-img [src]="item_image"></ion-img>
        </div>
      </ion-col>
      <ion-col size="9">
        <ion-list>
          <ion-item lines="none" class="input-border">
            <ion-label position="stacked">Item*</ion-label>
            <ion-select value="{{item_id}}"
              interface="action-sheet"
              (ionChange)="selectItem($event)"
              #itemSelection
              [disabled]="mode == '2' || mode == '4'">
              <ion-select-option value="{{item.items_id}}" *ngFor="let item of itemsList">{{item.name}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
        
        <ion-row>
          <ion-item lines="none" class="input-border">
            <ion-label position="stacked">Stock</ion-label>
            <ion-input readonly [(ngModel)]="item_stock" type="number"></ion-input>
          </ion-item>
        </ion-row>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Price</ion-label>
          <ion-input readonly [(ngModel)]="item_price" type="number"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Qty*</ion-label>
          <ion-input [readonly]="mode == '2' || mode == '4'" 
            [(ngModel)]="qty" 
            type="number" 
            (click)="calculate()">
          </ion-input>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Order Date</ion-label>
          <ion-datetime displayFormat="YYYY-MM-DD" 
          min="2020-01-01" 
          max="2100-01-01" 
          [(ngModel)]="order_date"
          (click)="calculate()"
          [readonly]="mode == '2' || mode == '4'"></ion-datetime>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Amount</ion-label>
          <ion-input readonly [(ngModel)]="amount" type="number"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Customer Name*</ion-label>
          <ion-input [readonly]="mode == '2' || mode == '4'" [(ngModel)]="cus_name" (click)="calculate()"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Tel.*</ion-label>
          <ion-input [readonly]="mode == '2' || mode == '4'" [(ngModel)]="cus_tel" type="number" (click)="calculate()"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" *ngIf="mode == '1' || mode == '3' || mode == '4' || cus_address == null">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Address</ion-label>
          <ion-textarea rows="3" [readonly]="mode == '4'" [(ngModel)]="cus_address" (click)="calculate()"></ion-textarea>
        </ion-item>
      </ion-col>
      <ion-col size="11" *ngIf="mode == '2' && cus_address != null">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Address</ion-label>
          <ion-textarea rows="3" [readonly]="mode == '2'" [(ngModel)]="cus_address" (click)="calculate()"></ion-textarea>
        </ion-item>
      </ion-col>
      <ion-col size="1" class="scan-btn" [hidden]="mode == '1' || mode == '3' || mode == '4' || cus_address == null">
        <ion-img [src]="'./assets/svg/maps.svg'" (click)="mapsView()"></ion-img>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" *ngIf="mode == '2' || mode == '4'">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Shipping No.</ion-label>
          <ion-input [readonly]="mode == '2' || mode == '4'" [(ngModel)]="shipping_no" (click)="calculate()"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="11" *ngIf="mode == '3' || mode == '1'">
        <ion-item lines="none" class="input-border">
          <ion-label position="stacked">Shipping No.</ion-label>
          <ion-input [(ngModel)]="shipping_no" (click)="calculate()"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="1" class="scan-btn" [hidden]="mode == '2' || mode == '4'">
        <ion-img [src]="'./assets/svg/scan.svg'" (click)="scanBarCode()"></ion-img>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
