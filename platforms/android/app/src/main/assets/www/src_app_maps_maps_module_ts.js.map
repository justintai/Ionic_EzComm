{"version":3,"sources":["./src/app/maps/maps-routing.module.ts","./src/app/maps/maps.module.ts","./src/app/maps/maps.page.ts","./src/app/maps/maps.page.scss","./src/app/maps/maps.page.html"],"names":[],"mappings":"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","file":"src_app_maps_maps_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MapsPage } from './maps.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MapsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MapsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MapsPageRoutingModule } from './maps-routing.module';\n\nimport { MapsPage } from './maps.page';\n\nimport { HMSSite } from '@hmscore/ionic-native-hms-site/ngx';\nimport { HMSMap } from '@hmscore/ionic-native-hms-map/ngx';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MapsPageRoutingModule\n  ],\n  declarations: [MapsPage],\n  providers: [HMSSite, HMSMap]\n})\nexport class MapsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { \n  HMSSite, SearchService, SearchServiceFactory,\n  TextSearchRequest, TextSearchResponse,\n  NearbySearchRequest, NearbySearchResponse,\n  DetailSearchRequest, DetailSearchResponse,\n  QueryAutocompleteRequest, QueryAutocompleteResponse,\n  QuerySuggestionRequest, QuerySuggestionResponse,\n  SearchFilter, LocationType, HwLocationType\n} from '@hmscore/ionic-native-hms-site/ngx';\nimport { HMSMap, CameraUpdateFactory, Color, HuaweiMap, LatLng, MarkerOptions } from '@hmscore/ionic-native-hms-map/ngx';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-maps',\n  templateUrl: './maps.page.html',\n  styleUrls: ['./maps.page.scss'],\n})\nexport class MapsPage implements OnInit {\n\n  address = this.route.snapshot.paramMap.get(\"id\");\n  private searchService: SearchService = null;\n  private readonly apiKey = \"CgB6e3x991tj6QIY2ZM0aWY9crhqEPGLCnMwH4t9LNVXgmMSQQEDTKJNGH2woZCd10QSp1425eSqpfmK3QMpOLL1\";\n  map: HuaweiMap;\n  iniLat:any = 1.7327292;\n  iniLng:any = 103.7006713;\n\n  constructor(private route: ActivatedRoute, private hmsSite: HMSSite, private hmsMap: HMSMap) { \n    SearchServiceFactory.create(this.apiKey)\n      .then(service => this.searchService = service)\n      .catch(err => console.log('An error occurred.'));\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewWillLeave() {\n    if(this.map)\n      this.map.hideMap();\n  }\n  \n  ngOnDestroy() {\n    if(this.map)\n      this.map.destroyMap();\n  }\n\n  async ionViewWillEnter() {\n    const mapOptions = {\n      cameraPosition: {\n          target: {lat: this.iniLat, lng: this.iniLng},\n          zoom: 2\n      }\n    };\n    this.map = await this.hmsMap.getMap('map-view', mapOptions);\n    // await this.map.setMyLocationEnabled(true);\n    await this.map.getUiSettings().setGestureScaleByMapCenter(true);\n    await this.locationSearch();\n  }\n\n  initMap() {\n    this.hmsMap.requestPermission();\n    const mapOptions = {\n      cameraPosition: {\n        target: {\n          lat: this.iniLat,\n          lng: this.iniLng\n        },\n        zoom: 7\n      }\n    }\n    this.hmsMap.getMap('map-view', mapOptions).then((map) => {\n      this.map = map;\n      console.log('Map Initialized!');\n    }).catch(e => console.log('Map Initialize error: ' + JSON.stringify(e)));\n  }\n\n\n  // scrollStart(event) {\n  //   console.log('logScrollStart : When Scroll Starts', event);\n  // }\n\n  // async scrolling(event) {\n  //     console.log('logScrolling : When Scrolling', event);\n  //     await this.map.scroll();\n  // }\n\n  // scrollEnd(event) {\n  //     console.log('logScrollEnd : When Scroll Ends', event);\n  // }\n\n  async locationSearch() {\n    const textSearchReq: TextSearchRequest = {\n      children: false,\n      query: this.address,\n      location: {\n        lat: this.iniLat,\n        lng: this.iniLng,\n      },\n      radius: 50000,\n      poiType: LocationType.ADDRESS,\n      hwPoiType: HwLocationType.ADDRESS,\n      countryCode: \"MY\",\n      language: \"en\",\n      pageIndex: 1,\n      pageSize: 5\n    };\n    const response: any = await this.searchService.textSearch(textSearchReq);\n    let obj = JSON.parse(response);\n    let cameraLocation: any;\n\n    if(obj.length != 0) {\n      cameraLocation = obj.sites[0].location;\n\n      try {\n        await this.map.moveCamera(CameraUpdateFactory.newCameraPosition({\n          target: {\n            lat: cameraLocation.lat,\n            lng: cameraLocation.lng\n          },\n          zoom: 15\n        }));\n\n        await this.map.addMarker({\n          position: {\n            lat: cameraLocation.lat,\n            lng : cameraLocation.lng\n        }});\n      }\n      catch(e) {\n        console.error('error : ',e);\n      }\n    }\n  }\n}\n","export default \"ion-content {\\n  --ion-background-color: transparent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksbUNBQUE7QUFBSiIsImZpbGUiOiJtYXBzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAgIC8vIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbn1cclxuXHJcbi8vICNtYXBzIHtcclxuLy8gICAgIHdpZHRoOiA4MCU7XHJcbi8vICAgICBoZWlnaHQ6IDUwMHB4O1xyXG4vLyAgICAgcGFkZGluZzogMTVweDtcclxuLy8gICAgIG1hcmdpbjogMCBhdXRvO1xyXG4vLyB9Il19 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\" mode=\\\"ios\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Maps</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div id=\\\"map-view\\\" style=\\\"width:100%;height:100%;\\\"></div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}